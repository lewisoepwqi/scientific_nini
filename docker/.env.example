# ============================================
# 科研数据分析Web工具 - 环境变量模板
# 复制此文件为 .env 并修改相应值
# ============================================

# ============================================
# 应用基础配置
# ============================================
APP_ENV=production
APP_NAME=Research Data Analysis Tool
APP_VERSION=1.0.0

# 安全密钥（生产环境必须修改！）
# 生成命令: openssl rand -hex 32
SECRET_KEY=your-super-secret-key-change-in-production

# 调试模式（生产环境必须设置为false）
DEBUG=false

# 日志级别: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# ============================================
# 数据库配置 (PostgreSQL)
# ============================================
DB_HOST=postgres
DB_PORT=5432
DB_NAME=research_db
DB_USER=research
# 密码必须修改！生成命令: openssl rand -hex 16
DB_PASSWORD=changeme-strong-password-here

# 完整数据库URL（通常不需要修改）
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}

# ============================================
# Redis配置
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
# 密码必须修改！
REDIS_PASSWORD=changeme-redis-password

# Redis URL
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# ============================================
# Celery配置（任务队列）
# ============================================
CELERY_BROKER_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/1
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/2
CELERY_WORKER_CONCURRENCY=4

# ============================================
# OpenAI API配置
# ============================================
# 从 https://platform.openai.com/api-keys 获取
OPENAI_API_KEY=sk-your-openai-api-key-here

# 可选：自定义API基础URL（用于代理）
# OPENAI_API_BASE=https://api.openai.com/v1

# 模型配置
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7

# ============================================
# 后端服务配置
# ============================================
# 工作进程数
MAX_WORKERS=4

# 请求超时（秒）
REQUEST_TIMEOUT=60

# 文件上传限制（MB）
MAX_UPLOAD_SIZE=100

# 允许上传的文件类型
ALLOWED_EXTENSIONS=csv,xlsx,xls,json,txt

# ============================================
# 前端配置
# ============================================
# API基础URL（相对于域名）
VITE_API_BASE_URL=/api

# 应用环境
VITE_APP_ENV=production

# 前端版本
VITE_APP_VERSION=1.0.0

# ============================================
# 邮件配置（可选，用于通知）
# ============================================
# SMTP服务器
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_TLS=true

# 发件人地址
EMAIL_FROM=noreply@your-domain.com

# ============================================
# 域名和SSL配置
# ============================================
# 你的域名
DOMAIN=your-domain.com

# 管理员邮箱（用于SSL证书）
ADMIN_EMAIL=admin@your-domain.com

# ============================================
# 监控配置（可选）
# ============================================
# 启用Prometheus监控
ENABLE_METRICS=false
METRICS_PORT=9090

# Sentry DSN（错误追踪）
SENTRY_DSN=

# ============================================
# 备份配置
# ============================================
# 自动备份启用
AUTO_BACKUP=true

# 备份保留天数
BACKUP_RETENTION_DAYS=30

# 备份时间（cron格式）
BACKUP_SCHEDULE=0 2 * * *

# ============================================
# 安全配置
# ============================================
# CORS允许的域名（逗号分隔）
CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com

# 速率限制（每分钟请求数）
RATE_LIMIT_PER_MINUTE=60

# JWT令牌过期时间（小时）
JWT_EXPIRE_HOURS=24

# ============================================
# 外部服务配置（可选）
# ============================================
# 阿里云OSS（文件存储）
ALIYUN_ACCESS_KEY_ID=
ALIYUN_ACCESS_KEY_SECRET=
ALIYUN_OSS_BUCKET=
ALIYUN_OSS_ENDPOINT=

# 腾讯云COS（文件存储）
TENCENT_SECRET_ID=
TENCENT_SECRET_KEY=
TENCENT_COS_BUCKET=
TENCENT_COS_REGION=
