---
name: literature_chart_driven_analysis
description: 基于用户上传文献 PDF 或参考图表，先提炼分析方法与作图思路，再对上传数据执行复现分析并输出图表与报告
category: workflow
---

# 文献/图表驱动分析技能（Literature & Chart Driven Analysis）

## 目标

当用户上传了 **PDF 文献** 或 **参考图表图片**，并希望“按文献方法/图表风格分析自己的数据”时，智能体必须按本技能执行，产出可复现的分析结果、图表与报告。

---

## 触发条件

出现以下任一意图时触发：

- “我上传了一篇论文，按里面方法分析我的数据”
- “我上传了图表，照这个思路做分析/出图”
- “先读文献和图，再分析我上传的数据并出报告”

---

## 输入要求（最小集）

1. 参考材料（至少一个）
   - PDF 文献（方法学来源）
   - 图表图片（目标视觉表达来源）
2. 用户数据（CSV/XLSX/TSV 等可读数据集）
3. 研究目标（若用户未给出，需主动补全）

---

## 标准工作流（必须按顺序执行）

### Step 1：识别并确认输入资产

- 识别当前会话中的：
  - 文献文件（PDF）
  - 图像文件（图表截图/图片）
  - 数据集文件
- 若缺关键输入，先给出最小补充清单再继续。

### Step 2：先导解读（文献/图表）

#### 2.1 文献解读（若提供 PDF）

输出结构化“方法摘要”：

- 研究问题与假设
- 数据类型与实验设计（组间/组内、时间序列、配对等）
- 统计方法（检验类型、模型、阈值、多重比较策略）
- 关键可视化设计（图型、坐标、分组编码、误差线、显著性标注）
- 可复现参数（过滤规则、标准化方法、异常值处理）

#### 2.2 图表解读（若提供图片）

输出结构化“作图摘要”：

- 图表类型判断（散点/折线/柱状/箱线/热图等）
- 变量映射（x、y、color、facet、group）
- 风格规则（颜色、字体、线宽、图例位置、标注方式）
- 版式与导出目标（适合汇报/论文/海报）

> 约束：若无法可靠提取某些细节，必须明确“已识别信息”与“待用户确认信息”。

### Step 3：融合为“可执行分析计划”

将文献方法与图表风格融合，形成计划并展示给用户确认：

1. 数据预处理计划（缺失值、异常值、编码、变换）
2. 统计分析计划（主分析 + 备选分析）
3. 图表产出计划（主图 + 补充图）
4. 报告结构计划（结果摘要、统计结论、方法局限）

### Step 4：执行数据分析

基于用户上传数据执行：

- 数据清洗与质量检查
- 描述统计与必要推断统计
- 输出关键中间结果（样本量、效应量、p 值/置信区间等）

### Step 5：按参考思路产出图表

- 优先生成与参考图“表达逻辑一致”的图
- 保持风格统一（颜色、标注、图例、标题层级）
- 至少输出：
  - 1 张主图（回答核心问题）
  - 1 份图注草稿（可直接用于报告）

### Step 6：生成分析报告

报告至少包含：

1. **参考资料解读摘要**（文献/图表）
2. **分析方法与参数**（可复现）
3. **主要结果**（含统计指标）
4. **图表说明**（每图结论）
5. **结论与局限**（可选后续实验/分析建议）

---

## 推荐工具协同（供执行时参考）

- 数据读取与预览：`load_dataset` / `preview_data` / `data_summary`
- 数据治理：`data_quality` / `clean_data`
- 统计分析：`t_test`、`anova`、`correlation`、`regression` 等
- 参考图解读：`image_analysis`
- 自定义复现代码：`run_code`
- 图表导出：`create_chart` / `export_chart`
- 报告导出：`generate_report` / `export_report`

---

## 输出模板（建议）

```markdown
## 一、参考资料解读
### 1) 文献方法摘要
- ...
### 2) 参考图表摘要
- ...

## 二、对用户数据的执行方案
- 数据预处理：...
- 统计方法：...
- 作图策略：...

## 三、分析结果
- 核心发现 1：...
- 核心发现 2：...

## 四、图表与说明
- 图 1（主图）：...
- 图 2（补充图，可选）：...

## 五、结论与后续建议
- 结论：...
- 局限：...
- 建议：...
```

---

## 质量门槛（必须满足）

- 不得跳过“先导解读”直接分析数据。
- 不得只给图不解释统计结论。
- 不得只给统计结论不提供图表或图表思路。
- 对不确定信息必须显式标记，不得编造文献细节。

